<!DOCTYPE html>
<html>
<head>
    <title>Анимация городской инфраструктуры</title>
    <style>
        /* Стиль границы */
        #canvas {
            border: 1px solid black;
        }
        body {
            background-color: #87CEFA; /* Светло-голубой цвет фона */
            margin: 0; /* Удаление отступы между содержимым body и краями страницы */
        }
    </style>
</head>
<body>
    <canvas id="Canvas" width="1400" height="600"></canvas>

    <script>
        const canvas = document.getElementById('Canvas');
        const ctx = canvas.getContext('2d');

        // Анимация движения машин и автобуса
        let carX = 0; // начальная позиция первой машины
        let secondCarX = -120; // начальная позиция второй машины
        let busX = canvas.width; // начальная позиция автобуса
        let thirdCarX = canvas.width + 100; // начальная позиция машины, идущей вслед за автобусом
        let secondbusX = -60; // начальная позиция автобуса

        //Функция выполнения анимации
        function draw() {
            // Очистка canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Солнце
            ctx.fillStyle = '#FFD700'; // желтый цвет солнца
            ctx.beginPath();
            ctx.arc(800, 80, 60, 0, Math.PI * 2);
            ctx.fill(); 

            // Облака
            ctx.fillStyle = '#FFFFFF'; // белый цвет облака
            ctx.beginPath();
            ctx.arc(200, 50, 30, 0, Math.PI * 2);
            ctx.arc(240, 50, 30, 0, Math.PI * 2);
            ctx.arc(280, 50, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#FFFFFF'; // белый цвет облака
            ctx.beginPath();
            ctx.arc(300, 120, 30, 0, Math.PI * 2);
            ctx.arc(340, 120, 30, 0, Math.PI * 2);
            ctx.arc(380, 120, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#FFFFFF'; // белый цвет облака
            ctx.beginPath();
            ctx.arc(500, 40, 30, 0, Math.PI * 2);
            ctx.arc(540, 40, 30, 0, Math.PI * 2);
            ctx.arc(580, 40, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#FFFFFF'; // белый цвет облака
            ctx.beginPath();
            ctx.arc(700, 70, 30, 0, Math.PI * 2);
            ctx.arc(740, 70, 30, 0, Math.PI * 2);
            ctx.arc(780, 70, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#FFFFFF'; // белый цвет облака
            ctx.beginPath();
            ctx.arc(900, 110, 30, 0, Math.PI * 2);
            ctx.arc(940, 110, 30, 0, Math.PI * 2);
            ctx.arc(980, 110, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#FFFFFF'; // белый цвет облака
            ctx.beginPath();
            ctx.arc(1200, 70, 30, 0, Math.PI * 2);
            ctx.arc(1240, 70, 30, 0, Math.PI * 2);
            ctx.arc(1280, 70, 30, 0, Math.PI * 2);
            ctx.fill();

            // Дорога
            ctx.fillStyle = '#808080'; // Серый цвет дороги
            ctx.fillRect(0, canvas.height - 80, canvas.width, 80);

            // Полоса дороги
            ctx.fillStyle = '#F0F8FF'; // Белый цвет полосы дороги
            ctx.fillRect(0, canvas.height - 50, canvas.width, 5);

            // Деревья
            ctx.fillStyle = '#8B4513'; // Коричневый ствол дерева
            ctx.fillRect(50, canvas.height - 130, 20, 50);
            ctx.fillStyle = '#008000'; // Зеленный цвет листьев
            ctx.beginPath();
            ctx.arc(60, canvas.height - 160, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#8B4513'; // Коричневый ствол дерева
            ctx.fillRect(200, canvas.height - 130, 20, 50);
            ctx.fillStyle = '#008000'; // Зеленный цвет листьев
            ctx.beginPath();
            ctx.arc(210, canvas.height - 160, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#8B4513'; // Коричневый ствол дерева
            ctx.fillRect(500, canvas.height - 130, 20, 50);
            ctx.fillStyle = '#008000'; // Зеленный цвет листьев
            ctx.beginPath();
            ctx.arc(510, canvas.height - 160, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#8B4513'; // Коричневый ствол дерева
            ctx.fillRect(730, canvas.height - 130, 20, 50);
            ctx.fillStyle = '#008000'; // Зеленный цвет листьев
            ctx.beginPath();
            ctx.arc(740, canvas.height - 160, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#8B4513'; // Коричневый ствол дерева
            ctx.fillRect(930, canvas.height - 130, 20, 50);
            ctx.fillStyle = '#008000'; // Зеленный цвет листьев
            ctx.beginPath();
            ctx.arc(940, canvas.height - 160, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#8B4513'; // Коричневый ствол дерева
            ctx.fillRect(1130, canvas.height - 130, 20, 50);
            ctx.fillStyle = '#008000'; // Зеленный цвет листьев
            ctx.beginPath();
            ctx.arc(1140, canvas.height - 160, 30, 0, Math.PI * 2);
            ctx.fill();

            ctx.fillStyle = '#8B4513'; // Коричневый ствол дерева
            ctx.fillRect(1300, canvas.height - 130, 20, 50);
            ctx.fillStyle = '#008000'; // Зеленный цвет листьев
            ctx.beginPath();
            ctx.arc(1310, canvas.height - 160, 30, 0, Math.PI * 2);
            ctx.fill();

            // Дома
            ctx.fillStyle = '#8B4513'; // Коричневый цвет дома
            ctx.fillRect(320, canvas.height - 230, 80, 150);
            ctx.fillStyle = '#FFD700'; // Желтый цвет окна
            ctx.fillRect(330, canvas.height - 210, 20, 20);
            ctx.fillRect(370, canvas.height - 210, 20, 20);
            ctx.fillRect(330, canvas.height - 180, 20, 20);
            ctx.fillRect(370, canvas.height - 180, 20, 20);
            ctx.fillRect(330, canvas.height - 150, 20, 20);
            ctx.fillRect(370, canvas.height - 150, 20, 20);
            ctx.fillRect(330, canvas.height - 120, 20, 20);
            ctx.fillRect(370, canvas.height - 120, 20, 20);

            ctx.fillStyle = '#8B4513'; // Коричневый цвет дома
            ctx.fillRect(600, canvas.height - 230, 80, 150);
            ctx.fillStyle = '#FFD700'; // Желтый цвет окна
            ctx.fillRect(610, canvas.height - 210, 20, 20);
            ctx.fillRect(650, canvas.height - 210, 20, 20);
            ctx.fillRect(610, canvas.height - 180, 20, 20);
            ctx.fillRect(650, canvas.height - 180, 20, 20);
            ctx.fillRect(610, canvas.height - 150, 20, 20);
            ctx.fillRect(650, canvas.height - 150, 20, 20);
            ctx.fillRect(610, canvas.height - 120, 20, 20);
            ctx.fillRect(650, canvas.height - 120, 20, 20);

            ctx.fillStyle = '#8B4513'; // Коричневый цвет дома
            ctx.fillRect(800, canvas.height - 230, 80, 150);
            ctx.fillStyle = '#FFD700'; // Желтый цвет окна
            ctx.fillRect(810, canvas.height - 210, 20, 20);
            ctx.fillRect(850, canvas.height - 210, 20, 20);
            ctx.fillRect(810, canvas.height - 180, 20, 20);
            ctx.fillRect(850, canvas.height - 180, 20, 20);
            ctx.fillRect(810, canvas.height - 150, 20, 20);
            ctx.fillRect(850, canvas.height - 150, 20, 20);
            ctx.fillRect(810, canvas.height - 120, 20, 20);
            ctx.fillRect(850, canvas.height - 120, 20, 20);

            ctx.fillStyle = '#8B4513'; // Коричневый цвет дома
            ctx.fillRect(1000, canvas.height - 230, 80, 150);
            ctx.fillStyle = '#FFD700'; // Желтый цвет окна
            ctx.fillRect(1010, canvas.height - 210, 20, 20);
            ctx.fillRect(1050, canvas.height - 210, 20, 20);
            ctx.fillRect(1010, canvas.height - 180, 20, 20);
            ctx.fillRect(1050, canvas.height - 180, 20, 20);
            ctx.fillRect(1010, canvas.height - 150, 20, 20);
            ctx.fillRect(1050, canvas.height - 150, 20, 20);
            ctx.fillRect(1010, canvas.height - 120, 20, 20);
            ctx.fillRect(1050, canvas.height - 120, 20, 20);

            // Автобус
            ctx.fillStyle = '#FFFF00'; // Желтый цвет корпуса
            ctx.fillRect(busX, canvas.height - 120, 130, 50);
            ctx.fillStyle = '#0000FF'; // Синий цвет окна
            ctx.fillRect(busX + 10, canvas.height - 110, 110, 15);

            // Третья машина
            ctx.fillStyle = '#FF7F50'; // Оранжевый цвет корпуса
            ctx.fillRect(thirdCarX, canvas.height - 75, 80, 20);
            ctx.fillStyle = '#0000FF'; // Синий цвет окна
            ctx.fillRect(thirdCarX + 30, canvas.height - 85, 40, 10);

            // Первая машина
            ctx.fillStyle = '#FF0000'; // Красный цвет корпуса
            ctx.fillRect(carX, canvas.height - 60, 80, 30);
            ctx.fillStyle = '#0000FF'; // Синий цвет окна
            ctx.fillRect(carX + 10, canvas.height - 70, 40, 10);

            // Вторая машина
            ctx.fillStyle = '#00FF00'; // Зеленый цвет корпуса
            ctx.fillRect(secondCarX, canvas.height - 40, 80, 20);
            ctx.fillStyle = '#0000FF'; // Синий цвет окна
            ctx.fillRect(secondCarX + 10, canvas.height - 50, 40, 10);

            // Второй автобус
            ctx.fillStyle = '#FFFF00'; // Желтый цвет корпуса
            ctx.fillRect(secondbusX, canvas.height - 60, 130, 50);
            ctx.fillStyle = '#0000FF'; // Синий цвет окна
            ctx.fillRect(secondbusX + 10, canvas.height - 50, 110, 15);

            //Граница канвы
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 5;
            ctx.strokeRect(0, 0, canvas.width, canvas.height);

            // Обновление позицию согласно формуле перемещения X = x + dx:
            carX += 2; // первой машины
            secondCarX += 4; // второй машины
            busX -= 2; // автобуса
            thirdCarX -= 4; //третьей машины
            secondbusX += 1; // второго автобуса

            // Проверка, чтобы машины не выходили за пределы canvas
            if (carX > canvas.width) {
                carX = -60;
            }
            if (secondCarX > canvas.width) {
                secondCarX = -80;
            }
            if (thirdCarX < -80) {
                thirdCarX = canvas.width + 100;
            }
            // Проверка, чтобы автобус не выходил за пределы canvas
            if (busX < -110) {
                busX = canvas.width;
            }
            if (secondbusX > canvas.width) {
                secondbusX = -60;
            }

            // Запуск следующий кадр анимации
            requestAnimationFrame(draw);
        }

        // Вызов функции запуска анимацию
        draw();
    </script>

</body>
</html>

